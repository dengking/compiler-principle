



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Project documentation with Markdown.">
      
      
        <link rel="canonical" href="https://dengking.github.io/compiler-principle/Chapter-7-Run-Time-Environments/ABI/Library/Relocation/Relocation(computing)/">
      
      
        <meta name="author" content="DengKing">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Relocation(computing) - compiler principle</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../../../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../../../css/extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#relocation-computing" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://dengking.github.io/compiler-principle" title="compiler principle" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              compiler principle
            </span>
            <span class="md-header-nav__topic">
              
                Relocation(computing)
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/dengking/compiler-principle" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://dengking.github.io/compiler-principle" title="compiler principle" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    compiler principle
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/dengking/compiler-principle" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Chapter-1-Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Chapter-1-Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-1-Introduction/" title="1-Introduction" class="md-nav__link">
      1-Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-1-Introduction/1.1-Language-Processors/" title="1.1-Language-Processors.md" class="md-nav__link">
      1.1-Language-Processors.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-1-Introduction/1.2-The-Structure-of-a-Compiler/" title="1.2-The-Structure-of-a-Compiler.md" class="md-nav__link">
      1.2-The-Structure-of-a-Compiler.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-1-Introduction/1.5-Applications-of-Compiler-Technology/" title="1.5-Applications-of-Compiler-Technology.md" class="md-nav__link">
      1.5-Applications-of-Compiler-Technology.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-1-Introduction/1.6-Programming-Language-Basics/" title="1.6-Programming-Language-Basics.md" class="md-nav__link">
      1.6-Programming-Language-Basics.md
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Chapter-2-A-Simple-Syntax-Directed-Translator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Chapter-2-A-Simple-Syntax-Directed-Translator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-2-A-Simple-Syntax-Directed-Translator/" title="2" class="md-nav__link">
      2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-2-A-Simple-Syntax-Directed-Translator/2.1-Introduction/" title="2.1-Introduction" class="md-nav__link">
      2.1-Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-2-A-Simple-Syntax-Directed-Translator/2.2-Syntax-Definition/" title="2.2-Syntax-Definition" class="md-nav__link">
      2.2-Syntax-Definition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-2-A-Simple-Syntax-Directed-Translator/2.3-Syntax-Directed-Translation/" title="2.3-Syntax-Directed-Translation" class="md-nav__link">
      2.3-Syntax-Directed-Translation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-2-A-Simple-Syntax-Directed-Translator/2.4-Parsing/" title="2.4-Parsing" class="md-nav__link">
      2.4-Parsing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Chapter-3-Lexical-Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Chapter-3-Lexical-Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-3-Lexical-Analysis/" title="3" class="md-nav__link">
      3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-3-Lexical-Analysis/3.1-The-Role-of-the-Lexical-Analyzer/" title="3.1-The-Role-of-the-Lexical-Analyzer" class="md-nav__link">
      3.1-The-Role-of-the-Lexical-Analyzer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-3-Lexical-Analysis/3.4-Recognition-of-Tokens/" title="3.4-Recognition-of-Tokens" class="md-nav__link">
      3.4-Recognition-of-Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-3-Lexical-Analysis/3.6-Finite-Automata/" title="3.6-Finite-Automata" class="md-nav__link">
      3.6-Finite-Automata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-3-Lexical-Analysis/3.7-From-Regular-Expressions-to-Automata/" title="3.7-From-Regular-Expressions-to-Automata" class="md-nav__link">
      3.7-From-Regular-Expressions-to-Automata
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Chapter-4-Syntax-Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Chapter-4-Syntax-Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/" title="4" class="md-nav__link">
      4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/4.2-Context-Free-Grammars/" title="4.2-Context-Free-Grammars" class="md-nav__link">
      4.2-Context-Free-Grammars
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/4.3-Writing-a-Grammar/" title="4.3-Writing-a-Grammar" class="md-nav__link">
      4.3-Writing-a-Grammar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/4.5-Bottom-Up-Parsing/" title="4.5-Bottom-Up-Parsing" class="md-nav__link">
      4.5-Bottom-Up-Parsing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/4.6-Introduction-to-LR-Parsing-Simple-LR/" title="4.6-Introduction-to-LR-Parsing-Simple-LR" class="md-nav__link">
      4.6-Introduction-to-LR-Parsing-Simple-LR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/4.7-More-Powerful-LR-Parsers/" title="4.7-More-Powerful-LR-Parsers" class="md-nav__link">
      4.7-More-Powerful-LR-Parsers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-4-Syntax-Analysis/VS-LL-parser-VS-LR-parser/" title="VS-LL-parser-VS-LR-parser" class="md-nav__link">
      VS-LL-parser-VS-LR-parser
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Chapter-5-Syntax-Directed-Translation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Chapter-5-Syntax-Directed-Translation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-5-Syntax-Directed-Translation/" title="5" class="md-nav__link">
      5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-5-Syntax-Directed-Translation/5.1-Syntax-Directed-Definitions/" title="5.1-Syntax-Directed-Definitions" class="md-nav__link">
      5.1-Syntax-Directed-Definitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-5-Syntax-Directed-Translation/5.2-Evaluation-Orders-for-SDD's/" title="5.2-Evaluation-Orders-for-SDD's" class="md-nav__link">
      5.2-Evaluation-Orders-for-SDD's
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-5-Syntax-Directed-Translation/5.3-Applications-of-Syntax-Directed-Translation/" title="5.3--Applications-of-Syntax-Directed-Translation" class="md-nav__link">
      5.3--Applications-of-Syntax-Directed-Translation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Chapter-6-Intermediate-Code-Generation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Chapter-6-Intermediate-Code-Generation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-6-Intermediate-Code-Generation/" title="6" class="md-nav__link">
      6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-6-Intermediate-Code-Generation/6.3-Types-and-Declarations/" title="6.3-Types-and-Declarations" class="md-nav__link">
      6.3-Types-and-Declarations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Chapter-7-Run-Time-Environments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Chapter-7-Run-Time-Environments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../" title="7" class="md-nav__link">
      7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../7.1-Storage-Organization/" title="7.1-Storage-Organization" class="md-nav__link">
      7.1-Storage-Organization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../7.2-Stack-Allocation-of-Space/" title="7.2-Stack-Allocation-of-Space" class="md-nav__link">
      7.2-Stack-Allocation-of-Space
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Chapter-9-Machine-Independent-Optimizations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Chapter-9-Machine-Independent-Optimizations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../Chapter-9-Machine-Independent-Optimizations/" title="9" class="md-nav__link">
      9
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    Segmentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relocation-table" class="md-nav__link">
    Relocation table
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unix-like-systems" class="md-nav__link">
    Unix-like systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relocation-procedure" class="md-nav__link">
    Relocation procedure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <div class="toc">
<ul>
<li><a href="#relocation-computing">Relocation (computing)</a><ul>
<li><a href="#segmentation">Segmentation</a></li>
<li><a href="#relocation-table">Relocation table</a><ul>
<li><a href="#unix-like-systems">Unix-like systems</a></li>
</ul>
</li>
<li><a href="#relocation-procedure">Relocation procedure</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#g53ops-operating-systems">G53OPS - Operating Systems</a><ul>
<li><a href="#relocation-and-protection">Relocation and Protection</a></li>
</ul>
</li>
<li><a href="#what-does-relocation-mean">What does 'relocation' mean?</a></li>
</ul>
</div>
<h1 id="relocation-computing"><a href="https://en.wikipedia.org/wiki/Relocation_(computing)">Relocation (computing)</a><a class="headerlink" href="#relocation-computing" title="Permanent link">#</a></h1>
<p><strong>Relocation</strong> is the process of assigning <strong>load addresses</strong> for <strong>position-dependent code</strong> and <strong>data</strong> of a program and adjusting the code and data to reflect the <strong>assigned addresses</strong>.[<a href="https://en.wikipedia.org/wiki/Relocation_(computing)#cite_note-Intel_iRMX-1">1]</a>[<a href="https://en.wikipedia.org/wiki/Relocation_(computing)#cite_note-Levine_1999_CH1-2">2]</a> Prior to the advent of multiprocess systems, and still in many embedded systems the addresses for objects were absolute starting at a known location, often zero. Since multiprocessing systems dynamically link and switch between programs it became necessary to be able to relocate objects using <a href="https://en.wikipedia.org/wiki/Position-independent_code">position-independent code</a>. A <a href="https://en.wikipedia.org/wiki/Linker_(computing)">linker</a> usually performs relocation in conjunction with <strong>symbol resolution</strong>, the process of searching files and libraries to replace symbolic references or names of <a href="https://en.wikipedia.org/wiki/Library_(computer_science)">libraries</a> with actual usable addresses in <a href="https://en.wikipedia.org/wiki/Primary_storage">memory</a> before running a program.</p>
<p>Relocation is typically done by the linker at <a href="https://en.wikipedia.org/wiki/Link_time">link time</a>, but it can also be done at <a href="https://en.wikipedia.org/wiki/Load_time">load time</a> by a relocating <a href="https://en.wikipedia.org/wiki/Loader_(computing)">loader</a>, or at <a href="https://en.wikipedia.org/wiki/Run_time_(program_lifecycle_phase)">run time</a> by the running program itself. Some architectures avoid relocation entirely by deferring <a href="https://en.wikipedia.org/w/index.php?title=Address_assignment&amp;action=edit&amp;redlink=1">address assignment</a> to run time; this is known as <a href="https://en.wikipedia.org/wiki/Zero_address_arithmetic">zero address arithmetic</a>.[<em>which?</em>]</p>
<p><strong><em>THINKING</em></strong> : 编译生成的executable，它们也是有地址空间的</p>
<h2 id="segmentation">Segmentation<a class="headerlink" href="#segmentation" title="Permanent link">#</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Object_file">Object files</a> are segmented into various <a href="https://en.wikipedia.org/wiki/Memory_segmentation">memory segment</a> types. Example segments include <a href="https://en.wikipedia.org/wiki/Code_segment">code segment(.text)</a>, <a href="https://en.wikipedia.org/wiki/Data_segment">initialized data segment(.data)</a>, <a href="https://en.wikipedia.org/wiki/.bss">uninitialized data segment(.bss</a>), or others.[<em>clarification needed</em>]</p>
<h2 id="relocation-table">Relocation table<a class="headerlink" href="#relocation-table" title="Permanent link">#</a></h2>
<p>The <strong>relocation table</strong> is a list of <a href="https://en.wikipedia.org/wiki/Pointer_(computer_programming)">pointers</a> created by the translator (a <a href="https://en.wikipedia.org/wiki/Compiler">compiler</a> or <a href="https://en.wikipedia.org/wiki/Assembler_(computer_programming)#Assembler">assembler</a>) and stored in the object or executable file. Each entry in the table, or "fixup", is a <a href="https://en.wikipedia.org/wiki/Pointer_(computer_programming)">pointer</a> to an <strong>absolute address</strong> in the object code that must be changed when the <strong>loader</strong> relocates the program so that it will refer to the correct location. Fixups are designed to support relocation of the program as a complete unit. In some cases, each fixup in the table is itself relative to a <strong>base address</strong> of zero, so the fixups themselves must be changed as the loader moves through the table.[<a href="https://en.wikipedia.org/wiki/Relocation_(computing)#cite_note-Levine_1999_CH3-3">3]</a></p>
<p>In some architectures a fixup that crosses certain boundaries (such as a segment boundary) or that is not aligned on a word boundary is illegal and flagged as an error by the linker.[<a href="https://en.wikipedia.org/wiki/Relocation_(computing)#cite_note-Borland_2007-4">4]</a></p>
<p><strong><em>SUMMARY</em></strong> : 显然，每个executable都包含一个relocation table。</p>
<h3 id="unix-like-systems">Unix-like systems<a class="headerlink" href="#unix-like-systems" title="Permanent link">#</a></h3>
<p>The <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">Executable and Linkable Format</a> (ELF) executable format and shared library format used by most Unix-like systems allows several types of relocation to be defined.[<a href="https://en.wikipedia.org/wiki/Relocation_(computing)#cite_note-ELF-5">5]</a></p>
<h2 id="relocation-procedure">Relocation procedure<a class="headerlink" href="#relocation-procedure" title="Permanent link">#</a></h2>
<p>The <strong>linker</strong> reads <strong>segment information</strong> and <strong>relocation tables</strong> in the object files and performs relocation by:</p>
<ul>
<li>merging all <strong>segments</strong> of common type into a single segment of that type</li>
<li>assigning <strong>unique run time addresses</strong> to each <strong>section</strong> and each symbol, giving all code (functions) and data (global variables) unique run time addresses</li>
<li>referring to the <strong>relocation table</strong> to modify[<em>why?</em>] symbols so that they point to the correct[<em>clarification needed</em>] run time addresses.</li>
</ul>
<h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">#</a></h2>
<p>The following example uses <a href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a>'s <a href="https://en.wikipedia.org/wiki/MIX">MIX</a> architecture and MIXAL assembly language. The principles are the same for any architecture, though the details will change.</p>
<p><a href="https://en.wikipedia.org/wiki/File:Relocation_example.tif"><img alt="Relocation example.tif" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Relocation_example.tif/lossy-page1-334px-Relocation_example.tif.jpg" /></a></p>
<ul>
<li>(A) Program <em>SUBR</em> is compiled to produce object file (B), shown as both machine code and assembler. The compiler may start the compiled code at an arbitrary location, often location zero as shown. Location 13 contains the machine code for the jump instruction to statement <em>ST</em> in location 5.</li>
<li>(C) If <em>SUBR</em> is later linked with other code it may be stored at a location other than zero. In this example the linker places it at location 120. The address in the jump instruction, which is now at location 133, must be <strong>relocated</strong> to point to the new location of the code for statement <em>ST</em>, now 125. [1 61 shown in the instruction is the MIX machine code representation of 125].</li>
<li>(D) When the program is loaded into memory to run it may be loaded at some location other than the one assigned by the linker. This example shows <em>SUBR</em> now at location 300. The address in the jump instruction, now at 313, needs to be relocated again so that it points to the updated location of <em>ST</em>, 305. [4 49 is the MIX machine representation of 305].</li>
</ul>
<h1 id="g53ops-operating-systems"><a href="http://www.cs.nott.ac.uk/~pszgxk/courses/g53ops/Memory%20Management/MM04-relocation.html">G53OPS - Operating Systems</a><a class="headerlink" href="#g53ops-operating-systems" title="Permanent link">#</a></h1>
<h2 id="relocation-and-protection">Relocation and Protection<a class="headerlink" href="#relocation-and-protection" title="Permanent link">#</a></h2>
<p>As soon as we introduce multiprogramming we have two problems that we need to address.</p>
<p><strong>Relocation</strong> : When a program is run it does not know in advance what <strong>location</strong> it will be loaded at. Therefore, the program cannot simply generate static addresses (e.g. from jump instructions). Instead, they must be made relative to where the program has been loaded.</p>
<p><strong><em>SUMMARY</em></strong> : 在编译阶段，编译器是无法得知其生成的executable在运行时的location的，因此编译器生成的executable不能够使用static address，它只能够使用relative address；编译器实现relative address的方式是使用symbol。这是使用relocation的原因。</p>
<p><strong>Protection</strong> : Once you can have two programs in memory at the same time there is a danger that one program can write to the address space of another program. This is obviously dangerous and should be avoided.</p>
<p>In order to cater(迎合) for <strong>relocation</strong> we could make the <strong>loader</strong> modify all the relevant addresses as the binary file is loaded. The OS/360 worked in this way but the scheme suffers from the following problems</p>
<blockquote>
<p>· The program cannot be moved, after it has been loaded without going through the same process.
· Using this scheme does not help the protection problem as the program can still generate illegal addresses (maybe by using absolute addressing).
· The program needs to have some sort of <strong>map</strong> that tells the <strong>loader</strong> which addresses need to be modified.</p>
</blockquote>
<p><strong><em>SUMMARY</em></strong> : 上面这段话介绍的内容指出了是由<strong>loader</strong>来执行relocation，以及执行的时机。它还涉及到了relocation的一些实现方法，如引入relocation table。</p>
<p>A solution, which solves both the relocation and protection problem is to equip(配备) the machine with two registers called the <strong><em>base</em></strong> and <strong><em>limit</em></strong> registers.</p>
<p>The <strong>base register</strong> stores the start address of the partition and the limit register holds the length of the partition. Any address that is generated by the program has the base register added to it. In addition, all addresses are checked to ensure they are within the range of the partition.</p>
<p>An additional benefit of this scheme is that if a program is moved within memory, only its base register needs to be amended. This is obviously a lot quicker than having to modify every address reference within the program.</p>
<p>The IBM PC uses a scheme similar to this, although it does not have a limit register.</p>
<h1 id="what-does-relocation-mean"><a href="https://cs.stackexchange.com/questions/86653/what-does-relocation-mean">What does 'relocation' mean?</a><a class="headerlink" href="#what-does-relocation-mean" title="Permanent link">#</a></h1>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../../.."}})</script>
      
    
  </body>
</html>