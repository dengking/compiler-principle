<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="DengKing">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>7.2 - compiler principle</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = 7.2;
    var mkdocs_page_input_path = "Chapter7-Run-Time-Environments/7.2Stack-Allocation-of-Space.md";
    var mkdocs_page_url = "/compiler-principle/Chapter7-Run-Time-Environments/7.2Stack-Allocation-of-Space/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/django.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> compiler principle</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter1</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter1-Introduction/">1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter1-Introduction/1.1Language-Processors/">1.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter1-Introduction/1.2The-Structure-of-a-Compiler/">1.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter1-Introduction/1.5Applications-of-Compiler-Technology/">1.5</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter1-Introduction/1.6Programming-Language-Basics/">1.6</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter2</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter2-A-Simple-Syntax-Directed-Translator/">2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2-A-Simple-Syntax-Directed-Translator/2.1Introduction/">2.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2-A-Simple-Syntax-Directed-Translator/2.2Syntax-Definition/">2.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2-A-Simple-Syntax-Directed-Translator/2.3Syntax-Directed-Translation/">2.3</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2-A-Simple-Syntax-Directed-Translator/2.4Parsing/">2.4</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter3</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter3-Lexical-Analysis/">3</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3-Lexical-Analysis/3.1The-Role-of-the-Lexical-Analyzer/">3.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3-Lexical-Analysis/3.4Recognition-of-Tokens/">3.4</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3-Lexical-Analysis/3.6Finite-Automata/">3.6</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3-Lexical-Analysis/3.7From-Regular-Expressions-to-Automata/">3.7</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter4</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/">4</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/4.2Context-Free-Grammars/">4.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/4.3Writing-a-Grammar/">4.3</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/4.5Bottom-Up-Parsing/">4.5</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/4.6Introduction-to-LR-Parsing-Simple-LR/">4.6</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/4.7More-Powerful-LR-Parsers/">4.7</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter4-Syntax-Analysis/VS-LL-parser-VS-LR-parser/">VS-LL-parser-VS-LR-parser</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter5</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter5-Syntax-Directed-Translation/">5</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter5-Syntax-Directed-Translation/5.1Syntax-Directed-Definitions/">5.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter5-Syntax-Directed-Translation/5.2Evaluation-Orders-for-SDD's/">5.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter5-Syntax-Directed-Translation/5.3Applications-of-Syntax-Directed-Translation/">5.3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter6</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter6-Intermediate-Code-Generation/">6</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter6-Intermediate-Code-Generation/6.3Types-and-Declarations/">6.3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter7</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">7</a>
                </li>
                <li class="">
                    
    <a class="" href="../7.1Storage-Organization/">7.1</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">7.2</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#72_stack_allocation_of_space">7.2 Stack Allocation of Space</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#721_activation_trees">7.2.1 Activation Trees</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter9</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter9-Machine-Independent-Optimizations/">9</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">compiler principle</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Chapter7 &raquo;</li>
        
      
    
    <li>7.2</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="72_stack_allocation_of_space">7.2 Stack Allocation of Space<a class="headerlink" href="#72_stack_allocation_of_space" title="Permanent link">#</a></h2>
<p>Almost all compilers for languages that use procedures, functions, or methods as units of user-defined actions manage at least part of their run-time memory as a <strong>stack</strong>. Each time a <strong>procedure</strong> is called, space for its local variables is pushed onto a <strong>stack</strong>, and when the procedure terminates, that space is popped
off the stack. As we shall see, this arrangement not only allows space to be shared by procedure calls whose durations do not overlap in time, but it allows us to compile code for a procedure in such a way that the <strong>relative addresses</strong> of its <strong>nonlocal variables</strong> are always the same, regardless of the sequence of procedure calls.</p>
<h3 id="721_activation_trees">7.2.1 Activation Trees<a class="headerlink" href="#721_activation_trees" title="Permanent link">#</a></h3>
<p>Stack allocation would not be feasible(可行的) if procedure calls, or activations of procedures, did not nest in time. The following example illustrates nesting of procedure calls.</p>
<p><strong>Example 7.1</strong> : Figure 7.2 contains a sketch of a program that reads nine integers into an array <code>a</code> and sorts them using the recursive <strong>quicksort algorithm</strong>.</p>
<pre><code class="c">int a[11];
void readArray() { /* Reads 9 integers into a[1]; :::; a[9]. */
    int i;
    ...
}
int partition(int m, int n) {
/* Picks a separator value v , and partitions a[m .. n] so that
a[m , p - 1] are less than v , a[p] = v , and a[p + 1 , n] are
equal to or greater than v . Returns p. */
    ...
}
void quicksort(int m, int n) {
    int i;
    if (n &gt; m) {
        i = partition(m, n);
        quicksort(m, i-1);
        quicksort(i+1, n);
    }
}
main() {
    readArray();
    a[0] = -9999;
    a[10] = 9999;
    quicksort(1,9);
}
</code></pre>

<p>The main function has three tasks. It calls <code>readArray</code>, sets the sentinels, and then calls <code>quicksort</code> on the entire data array. Figure 7.3 suggests a sequence of calls that might result from an execution of the program. In this execution, the call to <code>partition (1, 9)</code> returns 4, so <code>a[1]</code>through <code>a[3]</code> hold elements less than its chosen separator value <code>v</code> , while the larger elements are in <code>a[5]</code> through <code>a[9]</code>. </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../Chapter9-Machine-Independent-Optimizations/" class="btn btn-neutral float-right" title="9">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../7.1Storage-Organization/" class="btn btn-neutral" title="7.1"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/dengking/compiler-principle" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../7.1Storage-Organization/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../Chapter9-Machine-Independent-Optimizations/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
